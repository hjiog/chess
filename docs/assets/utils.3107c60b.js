var e,t,s,o,p,l,a,r,A,c,n,i,u=Object.defineProperty,f=Object.defineProperties,h=Object.getOwnPropertyDescriptors,g=Object.getOwnPropertySymbols,M=Object.prototype.hasOwnProperty,b=Object.prototype.propertyIsEnumerable,v=(e,t,s)=>t in e?u(e,t,{enumerable:!0,configurable:!0,writable:!0,value:s}):e[t]=s,d=(e,t)=>{for(var s in t||(t={}))M.call(t,s)&&v(e,s,t[s]);if(g)for(var s of g(t))b.call(t,s)&&v(e,s,t[s]);return e};import{r as k,h as y,j as S}from"./vendor.5eae4cb2.js";(t=e||(e={}))[t.red=1]="red",t[t.black=2]="black",t[t.colorMask=3]="colorMask",t[t.b=4]="b",t[t.c=8]="c",t[t.m=16]="m",t[t.p=32]="p",t[t.x=64]="x",t[t.s=128]="s",t[t.j=256]="j",t[t.selected=512]="selected",(o=s||(s={}))[o.red=1]="red",o[o.black=2]="black",o[o.colorMask=3]="colorMask",o[o.currentState=4]="currentState",o[o.previousState=8]="previousState",(l=p||(p={}))[l.init=0]="init",l[l.request=1]="request",l[l.agree=2]="agree",l[l.disagree=3]="disagree",(r=a||(a={}))[r.init=0]="init",r[r.request=1]="request",r[r.agree=2]="agree",r[r.disagree=3]="disagree",(c=A||(A={}))[c.waitingStart=0]="waitingStart",c[c.playWithComputer=1]="playWithComputer",c[c.playOnline=2]="playOnline",(i=n||(n={}))[i.system=0]="system",i[i.yours=1]="yours",i[i.opponent=2]="opponent";const C=(t,s)=>!(t&s&e.colorMask),m=t=>H.isPlayFirst?t&e.red:t&e.black,P=e=>{const{top:t,left:s,chessType:o,ChessBoardMap:p}=e,l=[],a=m(o);let r=0;return a&&t>0?(r=p[t-1][s],C(o,r)&&l.push([t-1,s])):t<9&&(r=p[t+1][s],C(o,r)&&l.push([t+1,s])),(t<5&&a||t>4&&!a)&&(s>0&&(r=p[t][s-1],C(o,r)&&l.push([t,s-1])),s<8&&(r=p[t][s+1],C(o,r)&&l.push([t,s+1]))),l},R=e=>{const{top:t,left:s,chessType:o,ChessBoardMap:p}=e,l=[];return t-2>=0&&s+1<=8&&!p[t-1][s]&&C(o,p[t-2][s+1])&&l.push([t-2,s+1]),t-1>=0&&s+2<=8&&!p[t][s+1]&&C(o,p[t-1][s+2])&&l.push([t-1,s+2]),t+1<=9&&s+2<=8&&!p[t][s+1]&&C(o,p[t+1][s+2])&&l.push([t+1,s+2]),t+2<=9&&s+1<=8&&!p[t+1][s]&&C(o,p[t+2][s+1])&&l.push([t+2,s+1]),t+2<=9&&s-1>=0&&!p[t+1][s]&&C(o,p[t+2][s-1])&&l.push([t+2,s-1]),t+1<=9&&s-2>=0&&!p[t][s-1]&&C(o,p[t+1][s-2])&&l.push([t+1,s-2]),t-1>=0&&s-2>=0&&!p[t][s-1]&&C(o,p[t-1][s-2])&&l.push([t-1,s-2]),t-2>=0&&s-1>=0&&!p[t-1][s]&&C(o,p[t-2][s-1])&&l.push([t-2,s-1]),l},E=e=>{const{top:t,left:s,chessType:o,ChessBoardMap:p}=e,l=[];let a=0;for(let r=t-1;r>=0;r--){if(p[r][s]){if(0===a){a++;continue}C(o,p[r][s])&&l.push([r,s]);break}0===a&&l.push([r,s])}a=0;for(let r=t+1;r<=9;r++){if(p[r][s]){if(0===a){a++;continue}C(o,p[r][s])&&l.push([r,s]);break}0===a&&l.push([r,s])}a=0;for(let r=s-1;r>=0;r--){if(p[t][r]){if(0===a){a++;continue}C(o,p[t][r])&&l.push([t,r]);break}0===a&&l.push([t,r])}a=0;for(let r=s+1;r<=8;r++){if(p[t][r]){if(0===a){a++;continue}C(o,p[t][r])&&l.push([t,r]);break}0===a&&l.push([t,r])}return l},T=e=>{const{top:t,left:s,chessType:o,ChessBoardMap:p}=e,l=[];for(let a=t-1;a>=0;a--){if(p[a][s]){C(o,p[a][s])&&l.push([a,s]);break}l.push([a,s])}for(let a=t+1;a<=9;a++){if(p[a][s]){C(o,p[a][s])&&l.push([a,s]);break}l.push([a,s])}for(let a=s-1;a>=0;a--){if(p[t][a]){C(o,p[t][a])&&l.push([t,a]);break}l.push([t,a])}for(let a=s+1;a<=8;a++){if(p[t][a]){C(o,p[t][a])&&l.push([t,a]);break}l.push([t,a])}return l},B=e=>{const{top:t,left:s,chessType:o,ChessBoardMap:p}=e,l=[];let a=0;const r=m(o);return t+2<10&&s+2<9&&!p[t+1][s+1]&&(r||t+2<=4&&!r)&&(a=p[t+2][s+2],C(o,a)&&l.push([t+2,s+2])),t+2<10&&s-2>=0&&!p[t+1][s-1]&&(r||t+2<=4&&!r)&&(a=p[t+2][s-2],C(o,a)&&l.push([t+2,s-2])),t-2>=0&&s+2<9&&!p[t-1][s+1]&&(t-2>=5&&r||!r)&&(a=p[t-2][s+2],C(o,a)&&l.push([t-2,s+2])),t-2>=0&&s-2>=0&&!p[t-1][s-1]&&(t-2>=5&&r||!r)&&(a=p[t-1][s-1],C(o,a)&&l.push([t-2,s-2])),l},j=e=>{const{top:t,left:s,chessType:o,ChessBoardMap:p}=e,l=[];let a=0;const r=m(o);return(s+1<=5&&t<9&&r||t+1<=2&&s+1<=5&&!r)&&(a=p[t+1][s+1],C(o,a)&&l.push([t+1,s+1])),(s-1>=3&&t<9&&r||t+1<=2&&s-1>=3&&!r)&&(a=p[t+1][s-1],C(o,a)&&l.push([t+1,s-1])),(t-1>=7&&s+1<=5&&r||s+1<=5&&t>0&&!r)&&(a=p[t-1][s+1],C(o,a)&&l.push([t-1,s+1])),(t-1>=7&&s-1>=3&&r||s-1>=3&&t>0&&!r)&&(a=p[t-1][s-1],C(o,a)&&l.push([t-1,s-1])),l},D=t=>{const{top:s,left:o,chessType:p,ChessBoardMap:l}=t,a=[];let r=0;const A=m(p);if((s+1<=9&&A||s+1<=2&&!A)&&(r=l[s+1][o],C(p,r)&&a.push([s+1,o])),(s-1>=7&&A||s-1>=0&&!A)&&(r=l[s-1][o],C(p,r)&&a.push([s-1,o])),A){for(let c=s-1;c>=0;c--)if(r=l[c][o],0!==r){if(r&e.j){a.push([c,o]);break}break}}else for(let c=s+1;c<=9;c++)if(r=l[c][o],0!==r){if(r&e.j){a.push([c,o]);break}break}return o+1<=5&&(r=l[s][o+1],C(p,r)&&a.push([s,o+1])),o-1>=3&&(r=l[s][o-1],C(p,r)&&a.push([s,o-1])),a};const w=[[9,9,9,11,13,11,9,9,9],[19,24,34,42,44,42,34,24,19],[19,24,32,37,37,37,32,24,19],[19,23,27,29,30,29,27,23,19],[14,18,20,27,29,27,20,18,14],[7,0,13,0,16,0,13,0,7],[7,0,7,0,15,0,7,0,7],[0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0]],O=[[206,208,207,213,214,213,207,208,206],[206,212,209,216,233,216,209,212,206],[206,208,207,214,216,214,207,208,206],[206,213,213,216,216,216,213,213,206],[208,211,211,214,215,214,211,211,208],[208,212,212,214,215,214,212,212,208],[204,209,204,212,214,212,204,209,204],[198,208,204,212,212,212,204,208,198],[200,208,206,212,200,212,206,208,200],[194,206,204,212,200,212,204,206,194]],U=[[90,90,90,96,90,96,90,90,90],[90,96,103,97,94,97,103,96,90],[92,98,99,103,99,103,99,98,92],[93,108,100,107,100,107,100,108,93],[90,100,99,103,104,103,99,100,90],[90,98,101,102,103,102,101,98,90],[92,94,98,95,98,95,98,94,92],[93,92,94,95,92,95,94,92,93],[85,90,92,93,78,93,92,90,85],[88,85,90,88,90,88,90,85,88]],W=[[100,100,96,91,90,91,96,100,100],[98,98,96,92,89,92,96,98,98],[97,97,96,91,92,91,96,97,97],[96,99,99,98,100,98,99,99,96],[96,96,96,96,100,96,96,96,96],[95,96,99,96,100,96,99,96,95],[96,96,96,96,96,96,96,96,96],[97,96,100,99,101,99,100,96,97],[96,97,98,98,98,98,98,97,96],[96,96,97,99,99,99,97,96,96]],N=[[0,0,0,20,0,20,0,0,0],[0,0,0,0,23,0,0,0,0],[0,0,0,20,0,20,0,0,0],[0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0],[0,0,0,20,0,20,0,0,0],[0,0,0,0,23,0,0,0,0],[0,0,0,20,0,20,0,0,0]],F=[[0,0,20,0,0,0,20,0,0],[0,0,0,0,0,0,0,0,0],[0,0,0,0,23,0,0,0,0],[0,0,0,0,0,0,0,0,0],[0,0,20,0,0,0,20,0,0],[0,0,20,0,0,0,20,0,0],[0,0,0,0,0,0,0,0,0],[18,0,0,0,23,0,0,0,18],[0,0,0,0,0,0,0,0,0],[0,0,20,0,0,0,20,0,0]],Q=[[0,0,0,8888,8888,8888,0,0,0],[0,0,0,8888,8888,8888,0,0,0],[0,0,0,8888,8888,8888,0,0,0],[0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0],[0,0,0,8888,8888,8888,0,0,0],[0,0,0,8888,8888,8888,0,0,0],[0,0,0,8888,8888,8888,0,0,0]],I={[e.red|e.b]:{url:"/chess/assets/b.0087a24f.png",position:[{top:6,left:0},{top:6,left:2},{top:6,left:4},{top:6,left:6},{top:6,left:8}],getAllMovePosition:P,valueMap:w},[e.red|e.c]:{url:"/chess/assets/c.c6db4a63.png",position:[{top:9,left:0},{top:9,left:8}],getAllMovePosition:T,valueMap:O},[e.red|e.m]:{url:"/chess/assets/m.d8625bb0.png",position:[{top:9,left:1},{top:9,left:7}],getAllMovePosition:R,valueMap:U},[e.red|e.p]:{url:"/chess/assets/p.15fe831b.png",position:[{top:7,left:1},{top:7,left:7}],getAllMovePosition:E,valueMap:W},[e.red|e.s]:{url:"/chess/assets/s.645362fe.png",position:[{top:9,left:3},{top:9,left:5}],getAllMovePosition:j,valueMap:N},[e.red|e.x]:{url:"/chess/assets/x.bc8ed76b.png",position:[{top:9,left:2},{top:9,left:6}],getAllMovePosition:B,valueMap:F},[e.red|e.j]:{url:"/chess/assets/j.3c50a97a.png",position:[{top:9,left:4}],getAllMovePosition:D,valueMap:Q},[e.black|e.b]:{url:"/chess/assets/B.d5c41bdc.png",position:[{top:3,left:0},{top:3,left:2},{top:3,left:4},{top:3,left:6},{top:3,left:8}],getAllMovePosition:P,valueMap:[...w].reverse()},[e.black|e.c]:{url:"/chess/assets/C.031b13be.png",position:[{top:0,left:0},{top:0,left:8}],getAllMovePosition:T,valueMap:[...O].reverse()},[e.black|e.m]:{url:"/chess/assets/M.ef67f231.png",position:[{top:0,left:1},{top:0,left:7}],getAllMovePosition:R,valueMap:[...U].reverse()},[e.black|e.p]:{url:"/chess/assets/P.075767cb.png",position:[{top:2,left:1},{top:2,left:7}],getAllMovePosition:E,valueMap:[...W].reverse()},[e.black|e.s]:{url:"/chess/assets/S.9841ac5c.png",position:[{top:0,left:3},{top:0,left:5}],getAllMovePosition:j,valueMap:[...N].reverse()},[e.black|e.x]:{url:"/chess/assets/X.94b2f536.png",position:[{top:0,left:2},{top:0,left:6}],getAllMovePosition:B,valueMap:[...F].reverse()},[e.black|e.j]:{url:"/chess/assets/J.b64f3c81.png",position:[{top:0,left:4}],getAllMovePosition:D,valueMap:[...Q].reverse()}},V=()=>{const e={};return Object.keys(I).forEach((t=>{const s=Number(t);var o,p;e[s]=(o=d({},I[s]),p={position:[...I[s].position]},f(o,h(p)))})),e},J=V(),x={[s.red]:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACYAAAAmCAMAAACf4xmcAAAAA3NCSVQICAjb4U/gAAAAQlBMVEX///8SAQAIAQAAAAAIAQAAAAAAAACNAACEAABzAAAAAABmAACNAAB6AABzAACtAAClAACEAADAAAC0AADDAADAAADm5SlBAAAAFnRSTlMAERERIiIzRERERFWZmZmqqqru7v//sHZOdwAAAAlwSFlzAAAOdAAADnQBaySz1gAAAB90RVh0U29mdHdhcmUATWFjcm9tZWRpYSBGaXJld29ya3MgOLVo0ngAAAAWdEVYdENyZWF0aW9uIFRpbWUAMTIvMTYvMTEz/4FsAAAAuElEQVQ4je2U0Q6DIAxFcbVlMpRtwP//6kpVTAzF5yWeB2JyT2pfeo0xIJgmRwZIjgibHmcclgwwJybYlmZDyTJ7QPwRvTbNR46JNcfWTNpuNLPnZJpubR6J5kmTCuRFw9Deq7IKYPvWtXBz8/9AfXo8igHPK2+SDgn6MQtygOWcXXcxv109l0NnsSUeVeO0/45LrZqUvp6wadFnLy7MhTA1mmR4vSVc63ItVTjPG0bEWqqdioYdY343/wjpWTtK9AAAAABJRU5ErkJggg==",[s.black]:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACYAAAAmCAMAAACf4xmcAAAAAXNSR0IB2cksfwAAAAlwSFlzAAAOdQAADnUBuWNRMgAAAEJQTFRFAAAAAAAAAAAAAAAAAAAAAAD/AgD6BgDzAAD+KACpJgCuAAD+AQD7CAEACwDpcwAABgDzNgCGCAEAEgDaEgEAZgAAo7eSVAAAABZ0Uk5TABEiM0T/8Pj+0NL//RHPRPfCIu4RVYjPod0AAAC0SURBVHic7ZTLDoMgEEXnAbRqWx+1//+rnQFE0zC4buJdgMk9GWfDAQCMgWr2DokdM1U56aTUDsnHhBoWUiccsn7crGl3bVkwJ3fH1m7cSe3StN6ilOvTNPYDW5CGHxEjX9+rJAE4tCnAcAJcufL/wXK08lQCX2fcmBxiP+YYyg6ZXHOxKb96kUNjsfmgGmf9d5l31Yi4mKoUvzdxZQ2OFZOsn6LBIlX8nbcuREWqDUXjFoAvqUoD5sRbGlQAAAAASUVORK5CYII="},X=e=>{const t=new Array(10);for(let s=0;s<t.length;s++){t[s]=new Array(9);for(let o=0;o<t[s].length;o++)t[s][o]=e?0:[]}return t},Y=()=>{return{chessTypeMap:(e=X(!0),Object.keys(J).forEach((t=>{const{position:s}=J[t];s.forEach((s=>{e[s.top][s.left]=Number(t)}))})),e),chessRefMap:X(!1)};var e},Z=Y(),q={[s.red|s.currentState]:k({top:-1,left:-1}),[s.red|s.previousState]:k({top:-1,left:-1}),[s.black|s.currentState]:k({top:-1,left:-1}),[s.black|s.previousState]:k({top:-1,left:-1})},z=y(e.red),G={call:()=>!1},H={isPlayFirst:!0,canStart:y(A.waitingStart)},K=S((()=>{const e=z.value&s.colorMask,t=e^s.colorMask;return{currentChessState:q[s.currentState|e],previousChessState:q[s.previousState|e],activedColorState:t,activingColorState:e}})),L=t=>{const o=V(),p=Y();Z.chessRefMap=p.chessRefMap,Z.chessTypeMap=p.chessTypeMap;const l=q[s.red|s.previousState],a=q[s.red|s.currentState],r=q[s.black|s.previousState],A=q[s.black|s.currentState],c=-1;if(l.top=c,l.left=c,a.top=c,a.left=c,r.top=c,r.left=c,A.top=c,A.left=c,H.isPlayFirst=t,z.value=e.red,!t){const t=Object.keys(o),s=new Set;for(let p=0;p<t.length;p++){const l=Number(t[p]),a=l&e.colorMask,r=l-a,A=r+(a^e.colorMask);if(s.has(r))continue;s.add(r);const c=o[l],n=o[A],i=d({},c);c.position=n.position,c.valueMap=n.valueMap,n.position=i.position,n.valueMap=i.valueMap}Z.chessTypeMap.reverse()}return o},$=k([]),_=()=>$.length,ee=()=>{const t=$.pop();if(t){const o=t[0].key,p=t[0].pos,l=t[1].key,a=t[1].pos,{chessTypeMap:r,chessRefMap:A}=Z;r[p.top][p.left]=o,r[a.top][a.left]=l;const c=A[p.top][p.left],n=A[a.top][a.left],i=n.pop();c.push(i),i.top=p.top,i.left=p.left,l&&(n[n.length-1].isDied=!1),z.value=o&e.colorMask;const u=$[$.length-1];if($.length){const t=u[0].key,o=u[0].pos,p=u[1].pos,l=t&e.colorMask,a=q[s.previousState|l],r=q[s.currentState|l];a.top=o.top,a.left=o.left,r.top=p.top,r.left=p.left}else{const t=z.value&e.colorMask^e.colorMask,o=q[s.previousState|t],p=q[s.currentState|t],l=-1;o.top=l,o.left=l,p.top=l,p.left=l}}},te=(t,o)=>{const{chessRefMap:p,chessTypeMap:l}=Z,a=l[t.top][t.left],r=l[o.top][o.left];l[o.top][o.left]=a,l[t.top][t.left]=0;const A=p[t.top][t.left],c=p[o.top][o.left],n=c[c.length-1],i=A.pop();var u,f;c.push(i),i.top=o.top,i.left=o.left,r&&(n.isDied=!0),u={key:a,pos:t},f={key:r,pos:o},$.push([u,f]);const h=a&s.colorMask,g=q[h|s.previousState],M=q[h|s.currentState];return g.top=t.top,g.left=t.left,M.top=o.top,M.left=o.left,z.value=h^s.colorMask,r&e.j};export{z as C,n as M,A as P,a as R,H as S,e as a,G as b,te as c,Z as d,x as e,q as f,K as g,s as h,J as i,_ as j,L as k,p as l,ee as r};
