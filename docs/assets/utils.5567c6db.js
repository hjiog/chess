var e=Object.defineProperty,t=Object.prototype.hasOwnProperty,s=Object.getOwnPropertySymbols,o=Object.prototype.propertyIsEnumerable,l=(t,s,o)=>s in t?e(t,s,{enumerable:!0,configurable:!0,writable:!0,value:o}):t[s]=o,p=(e,p)=>{for(var a in p||(p={}))t.call(p,a)&&l(e,a,p[a]);if(s)for(var a of s(p))o.call(p,a)&&l(e,a,p[a]);return e};import{e as a,r,f as A}from"./vendor.5b0d7bf3.js";var n,u,c,i,f,g,b,h,d,M,S,v,k=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",default:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACYAAAAmCAMAAACf4xmcAAAAAXNSR0IB2cksfwAAAAlwSFlzAAAOdQAADnUBuWNRMgAAAEJQTFRFAAAAAAAAAAAAAAAAAAAAAAD/AgD6BgDzAAD+KACpJgCuAAD+AQD7CAEACwDpcwAABgDzNgCGCAEAEgDaEgEAZgAAo7eSVAAAABZ0Uk5TABEiM0T/8Pj+0NL//RHPRPfCIu4RVYjPod0AAAC0SURBVHic7ZTLDoMgEEXnAbRqWx+1//+rnQFE0zC4buJdgMk9GWfDAQCMgWr2DokdM1U56aTUDsnHhBoWUiccsn7crGl3bVkwJ3fH1m7cSe3StN6ilOvTNPYDW5CGHxEjX9+rJAE4tCnAcAJcufL/wXK08lQCX2fcmBxiP+YYyg6ZXHOxKb96kUNjsfmgGmf9d5l31Yi4mKoUvzdxZQ2OFZOsn6LBIlX8nbcuREWqDUXjFoAvqUoD5sRbGlQAAAAASUVORK5CYII="}),y=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",default:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACYAAAAmCAMAAACf4xmcAAAAA3NCSVQICAjb4U/gAAAAQlBMVEX///8SAQAIAQAAAAAIAQAAAAAAAACNAACEAABzAAAAAABmAACNAAB6AABzAACtAAClAACEAADAAAC0AADDAADAAADm5SlBAAAAFnRSTlMAERERIiIzRERERFWZmZmqqqru7v//sHZOdwAAAAlwSFlzAAAOdAAADnQBaySz1gAAAB90RVh0U29mdHdhcmUATWFjcm9tZWRpYSBGaXJld29ya3MgOLVo0ngAAAAWdEVYdENyZWF0aW9uIFRpbWUAMTIvMTYvMTEz/4FsAAAAuElEQVQ4je2U0Q6DIAxFcbVlMpRtwP//6kpVTAzF5yWeB2JyT2pfeo0xIJgmRwZIjgibHmcclgwwJybYlmZDyTJ7QPwRvTbNR46JNcfWTNpuNLPnZJpubR6J5kmTCuRFw9Deq7IKYPvWtXBz8/9AfXo8igHPK2+SDgn6MQtygOWcXXcxv109l0NnsSUeVeO0/45LrZqUvp6wadFnLy7MhTA1mmR4vSVc63ItVTjPG0bEWqqdioYdY343/wjpWTtK9AAAAABJRU5ErkJggg=="}),_=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",default:"/chess/assets/J.b64f3c81.png"}),m=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",default:"/chess/assets/X.94b2f536.png"}),T=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",default:"/chess/assets/S.9841ac5c.png"}),C=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",default:"/chess/assets/P.075767cb.png"}),j=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",default:"/chess/assets/M.ef67f231.png"}),O=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",default:"/chess/assets/C.031b13be.png"}),R=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",default:"/chess/assets/B.d5c41bdc.png"}),P=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",default:"/chess/assets/j.3c50a97a.png"}),B=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",default:"/chess/assets/x.bc8ed76b.png"}),E=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",default:"/chess/assets/s.645362fe.png"}),z=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",default:"/chess/assets/p.15fe831b.png"}),D=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",default:"/chess/assets/m.d8625bb0.png"}),w=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",default:"/chess/assets/c.c6db4a63.png"}),U=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",default:"/chess/assets/b.0087a24f.png"});(u=n||(n={}))[u.red=1]="red",u[u.black=2]="black",u[u.colorMask=3]="colorMask",u[u.b=4]="b",u[u.c=8]="c",u[u.m=16]="m",u[u.p=32]="p",u[u.x=64]="x",u[u.s=128]="s",u[u.j=256]="j",u[u.selected=512]="selected",(i=c||(c={}))[i.red=1]="red",i[i.black=2]="black",i[i.colorMask=3]="colorMask",i[i.currentState=4]="currentState",i[i.previousState=8]="previousState",(g=f||(f={}))[g.init=0]="init",g[g.request=1]="request",g[g.agree=2]="agree",g[g.disagree=3]="disagree",(h=b||(b={}))[h.init=0]="init",h[h.request=1]="request",h[h.agree=2]="agree",h[h.disagree=3]="disagree",(M=d||(d={}))[M.waitingStart=0]="waitingStart",M[M.playWithComputer=1]="playWithComputer",M[M.playOnline=2]="playOnline",(v=S||(S={}))[v.system=0]="system",v[v.yours=1]="yours",v[v.opponent=2]="opponent";const W=(e,t)=>!(e&t&n.colorMask),N=e=>ne.isPlayFirst?e&n.red:e&n.black,F=e=>{const{top:t,left:s,chessType:o,ChessBoardMap:l}=e,p=[],a=N(o);let r=0;return a&&t>0?(r=l[t-1][s],W(o,r)&&p.push([t-1,s])):t<9&&(r=l[t+1][s],W(o,r)&&p.push([t+1,s])),(t<5&&a||t>4&&!a)&&(s>0&&(r=l[t][s-1],W(o,r)&&p.push([t,s-1])),s<8&&(r=l[t][s+1],W(o,r)&&p.push([t,s+1]))),p},x=e=>{const{top:t,left:s,chessType:o,ChessBoardMap:l}=e,p=[];return t-2>=0&&s+1<=8&&!l[t-1][s]&&W(o,l[t-2][s+1])&&p.push([t-2,s+1]),t-1>=0&&s+2<=8&&!l[t][s+1]&&W(o,l[t-1][s+2])&&p.push([t-1,s+2]),t+1<=9&&s+2<=8&&!l[t][s+1]&&W(o,l[t+1][s+2])&&p.push([t+1,s+2]),t+2<=9&&s+1<=8&&!l[t+1][s]&&W(o,l[t+2][s+1])&&p.push([t+2,s+1]),t+2<=9&&s-1>=0&&!l[t+1][s]&&W(o,l[t+2][s-1])&&p.push([t+2,s-1]),t+1<=9&&s-2>=0&&!l[t][s-1]&&W(o,l[t+1][s-2])&&p.push([t+1,s-2]),t-1>=0&&s-2>=0&&!l[t][s-1]&&W(o,l[t-1][s-2])&&p.push([t-1,s-2]),t-2>=0&&s-1>=0&&!l[t-1][s]&&W(o,l[t-2][s-1])&&p.push([t-2,s-1]),p},Q=e=>{const{top:t,left:s,chessType:o,ChessBoardMap:l}=e,p=[];let a=0;for(let r=t-1;r>=0;r--){if(l[r][s]){if(0===a){a++;continue}W(o,l[r][s])&&p.push([r,s]);break}0===a&&p.push([r,s])}a=0;for(let r=t+1;r<=9;r++){if(l[r][s]){if(0===a){a++;continue}W(o,l[r][s])&&p.push([r,s]);break}0===a&&p.push([r,s])}a=0;for(let r=s-1;r>=0;r--){if(l[t][r]){if(0===a){a++;continue}W(o,l[t][r])&&p.push([t,r]);break}0===a&&p.push([t,r])}a=0;for(let r=s+1;r<=8;r++){if(l[t][r]){if(0===a){a++;continue}W(o,l[t][r])&&p.push([t,r]);break}0===a&&p.push([t,r])}return p},I=e=>{const{top:t,left:s,chessType:o,ChessBoardMap:l}=e,p=[];for(let a=t-1;a>=0;a--){if(l[a][s]){W(o,l[a][s])&&p.push([a,s]);break}p.push([a,s])}for(let a=t+1;a<=9;a++){if(l[a][s]){W(o,l[a][s])&&p.push([a,s]);break}p.push([a,s])}for(let a=s-1;a>=0;a--){if(l[t][a]){W(o,l[t][a])&&p.push([t,a]);break}p.push([t,a])}for(let a=s+1;a<=8;a++){if(l[t][a]){W(o,l[t][a])&&p.push([t,a]);break}p.push([t,a])}return p},J=e=>{const{top:t,left:s,chessType:o,ChessBoardMap:l}=e,p=[];let a=0;const r=N(o);return t+2<10&&s+2<9&&!l[t+1][s+1]&&(r||t+2<=4&&!r)&&(a=l[t+2][s+2],W(o,a)&&p.push([t+2,s+2])),t+2<10&&s-2>=0&&!l[t+1][s-1]&&(r||t+2<=4&&!r)&&(a=l[t+2][s-2],W(o,a)&&p.push([t+2,s-2])),t-2>=0&&s+2<9&&!l[t-1][s+1]&&(t-2>=5&&r||!r)&&(a=l[t-2][s+2],W(o,a)&&p.push([t-2,s+2])),t-2>=0&&s-2>=0&&!l[t-1][s-1]&&(t-2>=5&&r||!r)&&(a=l[t-1][s-1],W(o,a)&&p.push([t-2,s-2])),p},V=e=>{const{top:t,left:s,chessType:o,ChessBoardMap:l}=e,p=[];let a=0;const r=N(o);return(s+1<=5&&t<9&&r||t+1<=2&&s+1<=5&&!r)&&(a=l[t+1][s+1],W(o,a)&&p.push([t+1,s+1])),(s-1>=3&&t<9&&r||t+1<=2&&s-1>=3&&!r)&&(a=l[t+1][s-1],W(o,a)&&p.push([t+1,s-1])),(t-1>=7&&s+1<=5&&r||s+1<=5&&t>0&&!r)&&(a=l[t-1][s+1],W(o,a)&&p.push([t-1,s+1])),(t-1>=7&&s-1>=3&&r||s-1>=3&&t>0&&!r)&&(a=l[t-1][s-1],W(o,a)&&p.push([t-1,s-1])),p},X=e=>{const{top:t,left:s,chessType:o,ChessBoardMap:l}=e,p=[];let a=0;const r=N(o);if((t+1<=9&&r||t+1<=2&&!r)&&(a=l[t+1][s],W(o,a)&&p.push([t+1,s])),(t-1>=7&&r||t-1>=0&&!r)&&(a=l[t-1][s],W(o,a)&&p.push([t-1,s])),r){for(let A=t-1;A>=0;A--)if(a=l[A][s],0!==a){if(a&n.j){p.push([A,s]);break}break}}else for(let A=t+1;A<=9;A++)if(a=l[A][s],0!==a){if(a&n.j){p.push([A,s]);break}break}return s+1<=5&&(a=l[t][s+1],W(o,a)&&p.push([t,s+1])),s-1>=3&&(a=l[t][s-1],W(o,a)&&p.push([t,s-1])),p},Y=[[9,9,9,11,13,11,9,9,9],[19,24,34,42,44,42,34,24,19],[19,24,32,37,37,37,32,24,19],[19,23,27,29,30,29,27,23,19],[14,18,20,27,29,27,20,18,14],[7,0,13,0,16,0,13,0,7],[7,0,7,0,15,0,7,0,7],[0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0]],Z=[[206,208,207,213,214,213,207,208,206],[206,212,209,216,233,216,209,212,206],[206,208,207,214,216,214,207,208,206],[206,213,213,216,216,216,213,213,206],[208,211,211,214,215,214,211,211,208],[208,212,212,214,215,214,212,212,208],[204,209,204,212,214,212,204,209,204],[198,208,204,212,212,212,204,208,198],[200,208,206,212,200,212,206,208,200],[194,206,204,212,200,212,204,206,194]],q=[[90,90,90,96,90,96,90,90,90],[90,96,103,97,94,97,103,96,90],[92,98,99,103,99,103,99,98,92],[93,108,100,107,100,107,100,108,93],[90,100,99,103,104,103,99,100,90],[90,98,101,102,103,102,101,98,90],[92,94,98,95,98,95,98,94,92],[93,92,94,95,92,95,94,92,93],[85,90,92,93,78,93,92,90,85],[88,85,90,88,90,88,90,85,88]],G=[[100,100,96,91,90,91,96,100,100],[98,98,96,92,89,92,96,98,98],[97,97,96,91,92,91,96,97,97],[96,99,99,98,100,98,99,99,96],[96,96,96,96,100,96,96,96,96],[95,96,99,96,100,96,99,96,95],[96,96,96,96,96,96,96,96,96],[97,96,100,99,101,99,100,96,97],[96,97,98,98,98,98,98,97,96],[96,96,97,99,99,99,97,96,96]],H=[[0,0,0,20,0,20,0,0,0],[0,0,0,0,23,0,0,0,0],[0,0,0,20,0,20,0,0,0],[0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0],[0,0,0,20,0,20,0,0,0],[0,0,0,0,23,0,0,0,0],[0,0,0,20,0,20,0,0,0]],K=[[0,0,20,0,0,0,20,0,0],[0,0,0,0,0,0,0,0,0],[0,0,0,0,23,0,0,0,0],[0,0,0,0,0,0,0,0,0],[0,0,20,0,0,0,20,0,0],[0,0,20,0,0,0,20,0,0],[0,0,0,0,0,0,0,0,0],[18,0,0,0,23,0,0,0,18],[0,0,0,0,0,0,0,0,0],[0,0,20,0,0,0,20,0,0]],L=[[0,0,0,8888,8888,8888,0,0,0],[0,0,0,8888,8888,8888,0,0,0],[0,0,0,8888,8888,8888,0,0,0],[0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0],[0,0,0,8888,8888,8888,0,0,0],[0,0,0,8888,8888,8888,0,0,0],[0,0,0,8888,8888,8888,0,0,0]],$={[n.red|n.b]:{url:{"../assets/red/b.png":U},position:[{top:6,left:0},{top:6,left:2},{top:6,left:4},{top:6,left:6},{top:6,left:8}],getAllMovePosition:F,valueMap:Y},[n.red|n.c]:{url:{"../assets/red/c.png":w},position:[{top:9,left:0},{top:9,left:8}],getAllMovePosition:I,valueMap:Z},[n.red|n.m]:{url:{"../assets/red/m.png":D},position:[{top:9,left:1},{top:9,left:7}],getAllMovePosition:x,valueMap:q},[n.red|n.p]:{url:{"../assets/red/p.png":z},position:[{top:7,left:1},{top:7,left:7}],getAllMovePosition:Q,valueMap:G},[n.red|n.s]:{url:{"../assets/red/s.png":E},position:[{top:9,left:3},{top:9,left:5}],getAllMovePosition:V,valueMap:H},[n.red|n.x]:{url:{"../assets/red/x.png":B},position:[{top:9,left:2},{top:9,left:6}],getAllMovePosition:J,valueMap:K},[n.red|n.j]:{url:{"../assets/red/j.png":P},position:[{top:9,left:4}],getAllMovePosition:X,valueMap:L},[n.black|n.b]:{url:{"../assets/black/B.png":R},position:[{top:3,left:0},{top:3,left:2},{top:3,left:4},{top:3,left:6},{top:3,left:8}],getAllMovePosition:F,valueMap:[...Y].reverse()},[n.black|n.c]:{url:{"../assets/black/C.png":O},position:[{top:0,left:0},{top:0,left:8}],getAllMovePosition:I,valueMap:[...Z].reverse()},[n.black|n.m]:{url:{"../assets/black/M.png":j},position:[{top:0,left:1},{top:0,left:7}],getAllMovePosition:x,valueMap:[...q].reverse()},[n.black|n.p]:{url:{"../assets/black/P.png":C},position:[{top:2,left:1},{top:2,left:7}],getAllMovePosition:Q,valueMap:[...G].reverse()},[n.black|n.s]:{url:{"../assets/black/S.png":T},position:[{top:0,left:3},{top:0,left:5}],getAllMovePosition:V,valueMap:[...H].reverse()},[n.black|n.x]:{url:{"../assets/black/X.png":m},position:[{top:0,left:2},{top:0,left:6}],getAllMovePosition:J,valueMap:[...K].reverse()},[n.black|n.j]:{url:{"../assets/black/J.png":_},position:[{top:0,left:4}],getAllMovePosition:X,valueMap:[...L].reverse()}},ee=()=>{const e={};return Object.keys($).forEach((t=>{const s=Number(t);e[s]=p(p({},$[s]),{position:[...$[s].position]})})),e},te=ee(),se={[c.red]:{"../assets/r_box.png":y},[c.black]:{"../assets/b_box.png":k}},oe=e=>{const t=new Array(10);for(let s=0;s<t.length;s++){t[s]=new Array(9);for(let o=0;o<t[s].length;o++)t[s][o]=e?0:[]}return t},le=()=>{return{chessTypeMap:(e=oe(!0),Object.keys(te).forEach((t=>{const{position:s}=te[t];s.forEach((s=>{e[s.top][s.left]=Number(t)}))})),e),chessRefMap:oe(!1)};var e},pe=le(),ae={[c.red|c.currentState]:a({top:-1,left:-1}),[c.red|c.previousState]:a({top:-1,left:-1}),[c.black|c.currentState]:a({top:-1,left:-1}),[c.black|c.previousState]:a({top:-1,left:-1})},re=r(n.red),Ae={call:()=>!1},ne={isPlayFirst:!0,canStart:r(d.waitingStart)},ue=A((()=>{const e=re.value&c.colorMask,t=e^c.colorMask;return{currentChessState:ae[c.currentState|e],previousChessState:ae[c.previousState|e],activedColorState:t,activingColorState:e}})),ce=e=>{const t=ee(),s=le();pe.chessRefMap=s.chessRefMap,pe.chessTypeMap=s.chessTypeMap;const o=ae[c.red|c.previousState],l=ae[c.red|c.currentState],a=ae[c.black|c.previousState],r=ae[c.black|c.currentState],A=-1;if(o.top=A,o.left=A,l.top=A,l.left=A,a.top=A,a.left=A,r.top=A,r.left=A,ne.isPlayFirst=e,re.value=n.red,!e){const e=Object.keys(t),s=new Set;for(let o=0;o<e.length;o++){const l=Number(e[o]),a=l&n.colorMask,r=l-a,A=r+(a^n.colorMask);if(s.has(r))continue;s.add(r);const u=t[l],c=t[A],i=p({},u);u.position=c.position,u.valueMap=c.valueMap,c.position=i.position,c.valueMap=i.valueMap}pe.chessTypeMap.reverse()}return t},ie=a([]),fe=()=>ie.length,ge=()=>{const e=ie.pop();if(e){const t=e[0].key,s=e[0].pos,o=e[1].key,l=e[1].pos,{chessTypeMap:p,chessRefMap:a}=pe;p[s.top][s.left]=t,p[l.top][l.left]=o;const r=a[s.top][s.left],A=a[l.top][l.left],u=A.pop();r.push(u),u.top=s.top,u.left=s.left,o&&(A[A.length-1].isDied=!1),re.value=t&n.colorMask;const i=ie[ie.length-1];if(ie.length){const e=i[0].key,t=i[0].pos,s=i[1].pos,o=e&n.colorMask,l=ae[c.previousState|o],p=ae[c.currentState|o];l.top=t.top,l.left=t.left,p.top=s.top,p.left=s.left}else{const e=re.value&n.colorMask^n.colorMask,t=ae[c.previousState|e],s=ae[c.currentState|e],o=-1;t.top=o,t.left=o,s.top=o,s.left=o}}},be=(e,t)=>{const{chessRefMap:s,chessTypeMap:o}=pe,l=o[e.top][e.left],p=o[t.top][t.left];o[t.top][t.left]=l,o[e.top][e.left]=0;const a=s[e.top][e.left],r=s[t.top][t.left],A=r[r.length-1],u=a.pop();var i,f;r.push(u),u.top=t.top,u.left=t.left,p&&(A.isDied=!0),i={key:l,pos:e},f={key:p,pos:t},ie.push([i,f]);const g=l&c.colorMask,b=ae[g|c.previousState],h=ae[g|c.currentState];return b.top=e.top,b.left=e.left,h.top=t.top,h.left=t.left,re.value=g^c.colorMask,p&n.j};export{pe as C,S as M,d as P,b as R,ne as S,re as a,n as b,be as c,Ae as d,se as e,ae as f,ue as g,c as h,te as i,fe as j,ce as k,f as l,ge as r};
